Abstract
Predicting the personality of users in e-commerce platforms plays an important role in the performance of personalized recommender systems. Recommendations in common systems are usually specific to a specific field, which changes the performance of these systems in different contexts. While personality-based recommender systems, due to focusing on the user's inherent characteristics that are relatively stable, can have a relatively stable performance in different contexts.
In this research, the degree of correlation and relationship between users' behavior and personality was determined, then using the fuzzy clustering algorithm, users' personality was divided into several groups and a model was obtained to predict personality based on purchasing behavior. Also, the fuzzy learning technique was used to train users' behavior and predict their personality group, and finally, a hybrid recommender system based on personality filtering and collaborative refinement with the contextual factor of time was presented to users for recommending places.
Keywords: Recommender systems, Personality traits, Purchase behaviour, Big Five Factor, OCEAN
Introduction
Today, the World Wide Web plays an important role in business and user experience for easy shopping, communication, education, etc., and is accompanied by an increasing expansion. This significant growth of information in web-based networks has led to information overload and has turned finding a specific piece of information into a difficult and time-consuming process. To solve this problem, recommender systems have emerged with the aim of providing personalized experiences for users, based on their personal preferences, interests and needs, which are of great importance because they help users solve the problem of information overload in various fields as well as business value [1].
Common recommender systems usually perform the recommendation process based on statistical information and user ratings, while one of the important goals of these systems is to create as much personalization as possible in the recommendation results. Considering user personality effectively has been able to provide valuable information to improve recommender performance. Also, the similarity measurement of users is in common recommendation methods specific to each field. It means that it often has different functions in different platforms. Personality-based recommender systems are largely an exception to this rule because they focus on the user's personality traits. Because people's personality is relatively stable over time and is not subject to changes.
Personality is the individual differences in preferences and behavior of users that affect the behavior that a person exhibits [2]. On the other hand, different parameters express the user's behavior. Such as: rating behavior, survey behavior, behavior influenced by social interactions, shopping behavior, etc. Each of these behaviors are more efficient in some recommender systems.
purchase behavior has been used more in the field of e-commerce and on websites for purchase and selling goods to predict the next purchases of users. The combination of people's personality and user's purchase behavior, which can have an impact on commercial websites, has been less investigated. The purpose of this research is to investigate people's personality based on their purchase behavior along with some background conditions such as time. Of course, considering the time factor has been investigated a lot in context-aware environments and has recently been applied in personalized systems including recommenders. This research is trying to improve personality-based recommender systems by analyzing users' purchase behavior and extracting their personality patterns, as well as taking into account the time changes of users' preferences.
Literature Review
Personality is a stable set of characteristics and behavioral styles that a person shows. These characteristics indicate the tendencies (such as natural or personal tendencies) of the individual and the paths that distinguish the individual from the society around him [13] The Big Five personality factor model is one of the best approaches developed to describe and measure individual differences in personality. [11] which is based on the assumption that the difference between people is based on the difference in five categories of personality traits. These characteristics include openness to experience, conscientiousness, extroversion, agreeableness, and neuroticism [12]. Also, by examining the external behavior of people, it is possible to study the distinction between the inherent characteristics of people and the relationship between them [13 Ghazal]. For example, Peng et al. use the Support Vector Machine (SVM) technique as a learning algorithm to predict and They have used the text to classify the personality characteristics of users [16].
With the emergence of personality computing, as a new research field related to artificial intelligence and personality psychology, personality-aware recommender systems have taken on an important role. These types of systems use the user's personality characteristics as a rich source of information for recommendations [10]. According to Table X, Padel et al. have conducted research to improve collaborative filtering recommender systems with the aim of providing the most appropriate music to listeners [10] [12]. In addition to music in the context of the game, a recommender system based on personality has been used. In this context, Yang et al. have used the personality characteristics of players and games simultaneously to recommend online games on the Steam website. The purpose of this research is to relate the personality of the players and the games in order to be able to suggest games that have the same personality as the players [18]. This model of systems has also been used to increase the accuracy of recommendations in educational platforms, for example, Gianotti and Casella have been effective in teaching and learning by adding students' personality traits as background information to filtering systems [19]. 
Recommender systems have been widely used as a means to reduce information load and provide travel recommendations to tourists [26]. Personalization is increasingly considered as an important factor for the effectiveness of recommender systems in the field of tourism, because travel involves emotional experiences, and therefore, the better the tourist is known, the better recommendations can be made [20]. 
However, although there are many studies in the field of tourism psychology, studies on predicting tourists' preferences based on their personality are limited [20]. From the psychological point of view, each person's personality is usually considered a fixed factor, but researchers believe that environmental factors and emotions are likely to influence the reactions that people express [15]. Despite the previous research, this article has been done by examining the personality of users from their purchase behavior and also considering the time preferences of users as a contextual factor in tourism.
Methodology
In this research, by designing several scenarios, the relationship between shopping behavior and personality-based approach has been examined, and then by categorizing the target users from the perspective of shopping behavior and their personality, the relationship pattern between shopping behavior and personality has been mentioned. Also, by examining users' time preferences, this background factor has been considered in the recommendation process along with other important factors such as personality similarity and users' ratings. Figure 1-3 is the conceptual diagram of the research, the steps of which are explained below.
 

Dataset
The selected data set for this research is related to Airbnb tourism site. The reservations made by users are related to the city of Amsterdam, Netherlands. This data set is in accordance with the assumptions of the problem and for this purpose it has been used in this research. The Airbnb database contains 313,347 rows and 80 attributes and contains complete information about the reservations made by users. The reservation of users on this platform is for the period of March 2009 to July 2022. Some of the important features of this data set are: description of the features of the places in the form of a text file, minimum number of reservation days, bedroom type, host information, user comment text file for each place, user comment time, destination city, reservation fee per Every night and  etc.
Preprocessing
Dataset preprocessing
The pre-processing of the dataset was done by checking the missing data, analyzing the outlier data and selecting the sample. In the discussion of missing data, columns with a large percentage of records were removed. Also, missing values in other columns were filled after checking, with methods such as replacing a fixed value, using the average value of the feature, and using the most likely value. For example, the number of bedrooms attribute was not available for countless records, when checking their website access link, it was determined that these locations were studios and did not have bedrooms, so these values were replaced with zero. Also, in the outlier data analysis, the values that were not similar to the general behavior of the data set were examined, identified and removed.
Text preprocessing
Some of the features required to implement research scenarios are textual data. To extract knowledge and process them, it is necessary to clean the textual data. Text preprocessing methods are important because they provide the necessary tools to convert text from natural language into a machine-readable format. Among the actions taken for text processing, converting text data from string format to document format, removing words less than 3 characters, converting all letters in text data to lowercase letters, removing numbers from text data, removing punctuation marks, clear Removing ineffective signs such as: and, a, an, the, etc., removing Greek letters from words are extractions of the English language.
User weighting
To select end users, the number of comments and the total number of words written by users are important. Because both factors are important in extracting the personality of users from the text. Due to the significant difference in the values of the two mentioned factors, they were normalized to be on a numerical scale between zero and one, and then the weight of each user was calculated so that the users with the appropriate weight were selected.
    Personality characteristics are obtained from the text of users, so the total number of words written by each user is more important than the number of comments left by him. For example, a user may have 3 comments with a low number of words and another user has left a long comment with a very high number of words. Therefore, to influence this importance, according to the formula 3-9, the weight assigned to the total of words is twice the weight assigned to the number of comments of each user.
Weight(〖User〗_i )=(2*count_comment(U_i ))+(4*sum_words(U_i)
Assumptions
To conduct this research, the following assumptions were considered:
H1: Selection of accommodations with a reservation fee of 15 to 500 dollars
H2: Selection of accommodations with a limit on the number of night reservations between 1 and 30 nights
H3: Selection of users with English comment text
H4: Considering users with more than 1 comment
H5: considering users with comment text of at least 100 words
Detecting the similarity of places
To implement this scenario, the texts related to the description of features and facilities that were previously pre-processed using the bag of words model were converted into separate tokens and then some combined words were converted into one word. For example, the two-part word game room has been changed to game_room to be recognized as a feature. Also, word repetition count command was used to determine how many times each word is repeated in a text. In addition, for each place, a vector of features is formed, each dimension of which represents one of the facilities of that place. To optimize the vectors formed in high dimensions, it is necessary to categorize features. For example, all audio facilities that had different locations were placed in one category and finally it was determined how many features both locations have in common with each other, then using Jaccardi similarity, the percentage of location similarity was obtained.
Detecting similarity of users with similar purchase behavior
The similarity of purchase behavior of users based on booking a similar accommodation has been investigated. Because if two users have booked the same place, in fact, in addition to going to a place with the same features and facilities, they also had the same cost, the number of days of reservation, the same city, etc. The similarity of users' reservation behavior is obtained based on the similarity of their reservation jacquard; That is, for both users, the sharing between the places they both traveled to has been calculated. The higher the output of the Jacquard similarity of two users means the greater the similarity of the purchase behavior of those two users.
Recognition of personality similarity of users
In this scenario, the text of users' comments is used to determine their personality. The extraction of character traits from the text has been done using the character recognition tool designed by Myers et al. This Java user interface calculates Pearson correlation coefficients between OCEAN and LIWC personality traits [23]. Also, four prediction models, namely linear regression, m5 model tree, m5 regression tree and support vector machine with linear kernel (SMOreg) are provided in this tool. In this research, regression tree m5, which had a better result in Roshchina's report, was selected [24]. The user's comment text has been used as the input of this personality identification tool, which obtains five five-factor personality traits for each user. In order to find the personality similarity of people, the Euclidean distance relationship has been used. For example, to calculate the similarity of two users ui and uj, the Euclidean distance of their personality characteristics is calculated and then converted into similarity. Calculate this similarity for all users to find out which users are similar to each other in terms of personality traits.
Proving the correlation between purchase behavior and user personality
By forming user reservation behavior scenarios and personality similarity scenarios among users, the degree of their correlation and connection has been obtained. By examining the correlation between the similarity of the purchase behavior and the similarity of the user's personality according to Figure 4, the personality-based approach based on the users' purchase behavior has been deduced.
Creating a communication pattern of the purchase behavior and personality of users
In order to find a suitable communication pattern between the purchase behavior of users and their personality characteristics, it is necessary to find a pattern so that the personality of users can be deduced from their purchase behavior. In order to implement this model, the following operations have been performed:
      In order to discover the pattern of behavior based on personality, it is necessary to place the personality of each user along with its reservation behavior. As explained in the previous sections, five big personality factors including (extroversion, neuroticism, adaptability, planning and acceptance of new experiences) were extracted from the text of users' comments. That is, for each user, each of the five personality factors that are in the range of 1 to 7 points are available. Each record of this set of characters belongs to one user, which have similarities and differences. Fuzzy clustering algorithm has been implemented to find users who are similar in personality traits.
One of the important points in clustering algorithms is finding the right number of categories. In this step, the elbow method has been used to find the most reasonable number of clusters. This method explains the percentage of variance as a function of clusters and selects the curve break as the optimal number of clusters [25]. After finding the appropriate number of clusters, the clustering algorithm according to figure xxx has been implemented based on the five personality characteristics of users. which are placed in each category of users who have the most similarity in terms of personality characteristics.
In the following, the features that express the purchase behavior of users are specified. These features describe the accommodation purchase behavior by users and include: the price of the reserved place, the time frame of the reservation, the number of days reserved and the type of room (private, shared, hotel). In fact, each record of these features describes the behavior of one of the users. Each record describing users' behavior belongs to a category of personality groups. With the primary key in the user dataset, the association of each user's reservation behavior records with the cluster to which it belongs in terms of personality is specified. In fact, it has been determined in which category of personality groups each user who has his own reservation behavior is placed. Finally, the fuzzy learning algorithm has been selected to train the set of behavior and personality and it learns which category of personality each reservation behavior record belongs to.
A proposed process for creating a personality-based recommender system
Algebraic modeling has been used to show the recommendation process. In situations where the user's text is not available to calculate his personality, each user's belonging to the corresponding personality cluster is measured. The first necessary condition for recommending users is that they have the required ts, that is, the threshold of similarity. Sij represents the similarity set of ui to uj. The recommendation model is defined in three steps. Figure 2-3 shows the process of creating the proposed recommender system.







Step 1: choosing the right places
 In order to recommend places to target users ui, based on the set of users uj, the variable mij, i.e. places that ui has not booked before but user uj has booked, has been used. In fact, the goal is to recommend new places to users. The selection of places is obtained from the relation 3-7.
m_ij=(P_i∪P_(j))-P_i  ,       1≤i≤n,    1≤j≤n           

Step 2: determining the first offer to recommend to the target user
In order to recommend the first item to the target user ui based on user uj, ts, the necessary threshold for similarity between two users, must be established and the user who has the maximum similarity with ui should be selected. Rij represens recommending user ui based on user uj, which is the highest rating given by user uj to mij, which is chosen to recommend. For new users whose personality is not available, the user's belonging to a similar personality cluster is obtained based on his behavior, and then the average personality characteristics of the users in the cluster are assigned to him.
{∀s_ij≥t_s  & s_ij=max ┤|  R_ij=max(r_j)}

Step 3: Determine other suggestions to recommend to the user
 For the following recommendations, the personality similarity of all users who meet the required threshold has been taken into consideration and not limited to the highest personality similarity. Then the Cartesian multiplication of the similarity of people with the highest rank given to mij has been calculated and the results are sorted in descending order to be used for recommendation. 
{∀s_ij≥t_s  & s_ij≠max ┤|  R_ij=max(s_ij×r_j)}

Recommender system based on personality model and user rating
Figure 3-3 is the personality-based recommender system model, considering the contextual factor of time. Imagine that the ui user is to be recommended an accommodation; To recommend this user, the following steps are taken:
• First, the ui behavior belongs to the personality cluster that is most similar to its members in terms of personality characteristics. The average of the characteristics of the members in the cluster has been used to determine the values of the user's personality characteristics. Then the personality similarity of the users is calculated and the users who have more than a certain threshold of personality similarity with the target user are selected.
• To recommend the first service to ui, the user most similar to him, uj, is determined. Based on the formula 3-7, the residences where the user uj has gone but the target user ui has not been identified.
• The accommodations specified in the previous step are listed in the descending order of the rating given by the user uj, and according to relation 8-3, the accommodations that have obtained the highest rating by the most similar user, i.e. uj, are designated as the first recommendation item for the target user.
• for subsequent recommendations, because the time preferences of users are taken into account when traveling; According to the formula 3-9, the reservation records of similar users are assigned a higher rank in the season to be recommended to the target user. This has caused the selection of similar users to be effective in different time periods. Then, the Cartesian multiplication of the highest residence in terms of user similarity has been calculated. The output of this Cartesian multiplication is listed in descending order and ranked based on the highest value for the second and subsequent recommendations.
• With this method, personality similarity and quality of accommodations and time factor are simultaneously considered for recommending next services.
Evaluation method and conclusions
To evaluate the proposed method in this research, the following steps have been taken:
1. The personality characteristics of users have been obtained using text processing techniques and user comment extraction. Five-factor personality traits have values in the range of 1 to 7. Also, the optimal k selection for clustering their personality similarity has been obtained with the elbow method.
2. Fuzzy clustering algorithm has been implemented on the values of users' personality characteristics, where each record represents the personality of each user. Three clusters have been created for users' personalities, and users who have the closest personality similarity to each other are placed in each cluster. All users are assigned a personality cluster.
3. Each reservation behavior belongs to a user and each user has his own personality traits that are extracted from the text written by him. All 5 personality traits of users are divided into different groups by the clustering algorithm. The purchase behavior of each user is connected with the label of his personality cluster group for the input of the learning algorithm.
4. In order to deduce how much of the user's purchase behavior can be extracted from their personality, well-known evaluation criteria are needed. For this reason, 80% of the set of users' purchase behavior (each record belonging to a user) along with the cluster label to which they belong in terms of personality were selected for the training part, and the remaining 20% were tested in the test part.
5. The output of the resulting confusion matrix calculates the number of predicted personality categories for each purchase behavior (user reservation behavior), based on which evaluation indicators such as: accuracy, recall, precision and f1-measure are calculated.
6. To evaluate the recommender system, users who have taken 3, 4 and 5 trips are extracted from the initial dataset. Due to the lack of access to users, their records have been used to validate and compare the proposed system. In this way, from the number of user trips, we have separated one to evaluate the recommender system. That is, if the user has taken 3 trips, 2 records of his trips are used for the steps mentioned above. Then it has been calculated how many of the recommendations of the recommender system led the user to travel to that place. This method is also implemented for collaborative filtering recommender system to compare with the current method.




Results
 Figure 4-12 shows the linear diagram of the relationship between the similarity of reservation behavior and the similarity of personality of users. The horizontal axis indicates the similarity of behavior and the vertical axis indicates the similarity of personality. Based on the above graph, when the similarity of users' reservation behavior exceeds 70%, their personality similarity tends to increase. 


Figure 13-4 is the best k results obtained for the elbow method. According to the graph obtained from this method, the most appropriate number of clusters is equal to 3, which has created the greatest angle and break in the slope of the graph. Also, Figure 14-4 shows the fuzzy clustering of users' personality characteristics in different personality dimensions.











Evaluation
In this section, the results of the research process have been evaluated.
Evaluation of personality prediction
The confusion matrix has been used to evaluate the correctness indicators of the research. The fuzzy learning algorithm was trained based on the relationship pattern between the reservation behaviors of users and their personality group, and then by receiving each reservation behavior, it has predicted the desired personality category. Table 15-4 shows the value of each index of recall, f-measure and precision for each category and the overall index of accuracy.

f-measure	precision	recall	
0.984	1	0.969	Cluster 0
0.982	1	0.966	Cluster 1
0.96	0.923	1	Cluster 2
accuracy: 0.976


Evaluation of research recommender system
The number of users who booked 3, 4 and 5 times accommodation on airbnb platform is equal to 616, 154 and 41 people. In order to evaluate the efficiency of this recommender system, it was calculated that in what percentage of times the suggestions of the recommender system have led to the users' journey. Accommodation recommendation priority for research system and collaborative filtering recommender system are compared.
Figure 4-18, 4-19 and 4-20 are the comparison of the current recommender system model and collaborative filtering in the first 10 suggestions for users who have traveled 3, 4 and 5 times.
 


Research recommender system and collaborative filtering have 207 and 174 suggestions, respectively, which have led to user journeys. Although the recommender accuracy of our model is only 5.36% better than collaborative filtering, it has been able to convert more users into customers in the initial recommendations, i.e. the first 1 to 5 suggestions. Collaborative filtering has performed better in the 7th, 8th and 9th propositions. Research recommender system and collaborative filtering have 33.60% and 28.24% correct recommendations in their first 10 suggestions, respectively.


The proposals of research recommender systems and collaborative filtering have led to user reservations in 42.85% and 51.29%, respectively. None of the two systems have made a suggestion in their first and second recommendation that will lead to the reservation of accommodation by the user. Although the collaborative filtering recommender system was able to provide more recommendations that led to travel, but as it is clear in the frequency diagram, the recommender system of this research was more accurate in its initial recommendations, namely the third and fourth recommendations. Also, the number of correct recommendations of both systems is 66 and 79, respectively.
 


The accuracy of the suggestions of the two recommender systems of research and collaborative filtering for users with exactly 5 reservations is 48.78% and 39.02%, respectively, which has led to the reservation of users. The best performance of the collaborative recommender system has been in the eighth recommendation, which is 5 correct recommendations. The research recommender system has performed better than the collaborative recommender system in its initial recommendations, i.e. the third, fifth and sixth recommendations. Collaborative filtering in the 7th and 8th recommendations has been very accurate, while the research advisor in the 7th recommendation has not been able to make a suggestion that leads to the user's reservation. Considering the limited number of users with 5 reservations, these accuracy values are acceptable. Because the criteria for evaluating the user's reservation is after the recommendation process.
Conclusion and discussion around it
The summary and results of the approach mentioned in the previous chapter are as follows:
• By testing different scenarios, including the similarity of reservation behavior and personality similarity of users and comparing and checking them with each other, the correlation between these two factors was proved. The results of the relationship between behavior scenarios and users' personality have shown that the direct relationship between the similarity of shopping behavior and the characteristics of the big five personality factors has emerged when the Jaccard similarity of users' behavior has exceeded the threshold of 70%. The established relationship threshold is specific to this research and the behavior of the chart may be different in other purchase and selling platforms.
• By clustering personality traits, a model was obtained to predict the purchase behavior of users. For this purpose, first the personality characteristics of the users were grouped by the fuzzy clustering algorithm, then it was determined in which category of personality groups the personality characteristics of the users were placed, and the reservation behavior of each user was placed next to his/her personality group. Then, by fuzzy learning algorithm, the data were trained to discover the relationship between shopping behavior and personality. This makes it so that when a new user enters the electronic accommodation reservation platform and no information about his personality is available, we can get the personality group he belongs to by checking his purchase behavior.
• The proposed communication model for the purchase behavior and personality of the users was proposed based on the unsupervised method and has produced excellent results with a high accuracy of 97%. This model reduces the need for questionnaire methods that require the user to answer and take time.
• None of the personality groups made significant bookings in a particular month or season that we can generalize to the group as a whole. In general, accommodation bookings by users have been more in spring and summer. This is due to the environment and climate of the Netherlands. The time factor was used as an important and influential environmental factor in user choices in the recommender model. For example, in May, due to the holding of tulip festivals, there has been a higher reservation than in all other months of the year.
• The recommender system presented in this research is a combination of personality filtering recommender system, collaborative and context-based filtering. This model of the system has considered the degree of similarity of behavior and belonging of users to personality groups, the preferences of similar users and the rank assigned to residences. It has also considered the contextual factor of time according to the season that is supposed to be recommended to the user.
• To evaluate the research recommender system, this system was compared with the collaborative filtering recommender system. The research recommender system was 5.36% more accurate for users who had 3 trips, 8.44% lower accuracy for users who had 4 trips, and 9.76% more accurate for users who had 5 trips compared to the collaborative recommender system. In the analysis of the frequency charts of both recommender systems, it was found that even when the prediction accuracy was lower than the collaborative filtering model, it had correct suggestions in the initial recommendations, which led to the booking of users.
Future work
The people surveyed in this research have booked accommodation in the Netherlands; On the other hand, the personality structure in different cultures has significant differences. In future research, in order to investigate the dimensions of this research, the accommodation purchase behavior of users and their belonging to different personality groups can be investigated in several different countries. Also, to advise users, image processing can be used for more accurate similarity measurement of residences. This research obtained a high accuracy for prediction in the context of lodging reservations; In the future, this model can be used in other areas of e-commerce. Also, with the aim of research development, the research recommender system can be compared with other recommender systems. Because this system has performed relatively well in the initial recommendations, personality-based recommenders can be used for the initial recommendations, and other recommender system models can be used for the fifth recommendations and later.

[26] Gavalas, D., Konstantopoulos, C., Mastakas, K., & Pantziou, G. (2014). Mobile recommender systems in tourism. Journal of network and computer applications, 39, 319-333.
